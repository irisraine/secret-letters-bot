import nextcord
import engine.config as config
import io


class MessageContainer:
    def __init__(self, title=None, description=None, image_path=None, image_data=None, author=False):
        self.__embed = nextcord.Embed(
            title=title,
            description=description,
            colour=nextcord.Colour.from_rgb(48, 213, 200),
        )
        if image_data:
            image_filename = image_data[1]
            fp = io.BytesIO(image_data[0])
        else:
            if not image_path:
                image_path = config.SEPARATOR_FILEPATH
            image_filename = image_path.split('/')[-1]
            fp = image_path
        image_attachment = f'attachment://{image_filename}'
        self.__embed.set_image(url=image_attachment)
        self.__image = nextcord.File(fp=fp, filename=image_filename)
        if author:
            self.__embed.set_author(name="–û–ª–µ–Ω—å –í–µ–Ω–∏–∞–º–∏–Ω", icon_url=config.BOT_AVATAR_STATIC_URL)
            self.__embed.set_footer(text="–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –±–æ—Ç–æ–º-–æ–ª–µ–Ω–µ–º —Å —Å–µ—Ä–≤–µ—Ä–∞ ‚ãÜÀô‚ÇäùöÜùöéùöúùöù ùö†ùöòùöïùöüùöéùöú‚ÇäÀô‚ãÜ")

    @property
    def embed(self):
        return self.__embed

    @property
    def image(self):
        return self.__image


class Letter(MessageContainer):
    def __init__(self, db_record):
        recipient_globalname = db_record[3]
        sender_alias = db_record[6]
        image_binary_data = db_record[8]
        image_filename = db_record[9]
        image_data = (image_binary_data, image_filename) if image_binary_data else None
        letter_greeting = f"‚ú® ***–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, {recipient_globalname}.*** ‚ú®"
        if sender_alias:
            notify = f"–¢–µ–±–µ –æ—Ç–ø—Ä–∞–≤–∏–ª(–∞) —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ {sender_alias}!"
        else:
            notify = "–¢–µ–±–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ!"
        body_content = f"üíå **{notify}**\n\n" + db_record[7]
        super().__init__(
            title=letter_greeting,
            description=body_content,
            image_data=image_data,
            author=True,
        )


ERROR_HEADER = "–û—à–∏–±–∫–∞! :("

introduction = MessageContainer(
    title="**–û–ª–µ–Ω—å –í–∞–ª–µ–Ω—Ç–∏–Ω**",
    description="–° –¥–∞–≤–Ω–∏—Ö –≤—Ä–µ–º–µ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–µ–≥–µ–Ω–¥–∞ –æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–º –±—ã—Å—Ç—Ä–æ–Ω–æ–≥–æ–º –æ–ª–µ–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç—Ä–∞–Ω—Å—Ç–≤—É–µ—Ç –ø–æ –º–∏—Ä—É –∏ "
                "–ø—Ä–∏–Ω–æ—Å–∏—Ç –ª—é–¥—è–º —Ç—ë–ø–ª—ã–µ –ø–æ—Å–ª–∞–Ω–∏—è –≤ –ø–∏—Å—å–º–∞—Ö –æ—Ç –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π. –ò–º—è —ç—Ç–æ–≥–æ –æ–ª–µ–Ω—è ‚Äî –í–∞–ª–µ–Ω—Ç–∏–Ω, –∏ –Ω–∞ —ç—Ç–æ—Ç "
                "—Ä–∞–∑ –æ–Ω –∑–∞–±—Ä—ë–ª –∏ –∫ –Ω–∞–º –≤ –≥–æ—Å—Ç–∏. –î–∞–≤–∞–π—Ç–µ –≤—Å—Ç—Ä–µ—Ç–∏–º –≥–æ—Å—Ç—è –∫–∞–∫ –ø–æ–ª–æ–∂–µ–Ω–æ, –Ω–µ –ø–æ–∂–∞–ª–µ–≤ –µ–º—É –ø–∏—Å–µ–º –∏ "
                "–æ—Ç–∫—Ä—ã—Ç–æ–∫, —á—Ç–æ–±—ã 14 —Ñ–µ–≤—Ä–∞–ª—è –≥–¥–µ-—Ç–æ –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ü–µ –ø–ª–∞–Ω–µ—Ç—ã –æ–Ω –≤—Ä—É—á–∏–ª —ç—Ç–∏ –ø–æ—Å–ª–∞–Ω–∏—è –∞–¥—Ä–µ—Å–∞—Ç–∞–º, "
                "–∏ –≤ –º–∏—Ä–µ —Å—Ç–∞–ª–æ —á—É—Ç–æ—á–∫—É —Å–≤–µ—Ç–ª–µ–π.",
    image_path=config.INTRODUCTION_IMAGE_FILEPATH
)
instruction = MessageContainer(
    title="**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**",
    description="- –í –ø–æ–ª–µ ***–∏–º—è –∞–¥—Ä–µ—Å–∞—Ç–∞*** —É–∫–∞–∂–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–º—É —Ö–æ—Ç–∏—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å "
                "(–Ω–∞–ø—Ä–∏–º–µ—Ä: bibster). –û–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ —á–µ–ª–æ–≤–µ–∫–∞ –ü–û–î –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–º –∏–º–µ–Ω–µ–º.\n"
                "- –ü–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ —É–∑–Ω–∞–µ—Ç, –∫—Ç–æ –≤—ã. "
                "–û–¥–Ω–∞–∫–æ –≤ –ø–æ–ª–µ ***–º–æ–π –ø—Å–µ–≤–¥–æ–Ω–∏–º*** –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∑–≤–∞—Ç—å —Å–µ–±—è —Ç–∞–π–Ω—ã–º –∏–º–µ–Ω–µ–º.\n"
                "- –í –ø–æ–ª–µ ***—Ç–µ–∫—Å—Ç –ø–∏—Å—å–º–∞*** –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–µ –ø–∏—Å—å–º–æ.\n- "
                "–í –ø–æ–ª–µ ***–æ—Ç–∫—Ä—ã—Ç–∫–∞*** —É–∫–∞–∂–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –ø–∏—Å—å–º—É "
                "(–≤ —Ñ–æ—Ä–º–∞—Ç–µ JPG, PNG –∏–ª–∏ GIF). –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ—é –ø–∏–∫—á—É, —Ç–æ –µ—ë –Ω–∞–¥–æ –∑–∞–ª–∏—Ç—å –∫—É–¥–∞-–Ω–∏–±—É–¥—å "
                "(–º–æ–∂–Ω–æ –¥—Ä—É–≥—É –≤ –ª—Å) –ø–æ—Ç–æ–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ—ë, –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Ñ–æ—Ä–º—É, –∏ "
                "–ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –º–æ–∂–Ω–æ —ç—Ç—É –∫–∞—Ä—Ç–∏–Ω–∫—É —É–¥–∞–ª—è—Ç—å.\n\n"
                "–í —Å–ª—É—á–∞–µ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—à–∏–±–∫–∞ –∏ –≤–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è "
                "–∑–∞–Ω–æ–≤–æ –≤—Å–µ –∑–∞–ø–æ–ª–Ω—è—Ç—å. –ü–æ—ç—Ç–æ–º—É –ª—É—á—à–µ –∑–∞—Ä–∞–Ω–µ–µ –Ω–∞–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ, "
                "–∏ –∑–∞—Ç–µ–º –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ —Ñ–æ—Ä–º—É.\n"
                "–ü–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ *—Å–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤–∞–ª–µ–Ω—Ç–∏–Ω–æ–∫* –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö "
                "–≤–∞–º–∏ –≤–∞–ª–µ–Ω—Ç–∏–Ω–æ–∫, —Å—Ç–æ—è—â–∏—Ö –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –∞ —Ç–∞–∫–∂–µ "
                "—É–¥–∞–ª–∏—Ç—å, –æ–¥–Ω–∞–∫–æ –ø–æ–º–Ω–∏—Ç–µ - **—É–¥–∞–ª–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã–º!**\n"
                "–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É. –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö "
                "–≤–∞–ª–µ–Ω—Ç–∏–Ω–æ–∫ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 25 —à—Ç—É–∫."
)
no_permission_error = MessageContainer(
    title=ERROR_HEADER,
    description="–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã!"
)
recipient_error = MessageContainer(
    title=ERROR_HEADER,
    description="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ."
)
send_already_error = MessageContainer(
    title=ERROR_HEADER,
    description="–í—ã —É–∂–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é!"
)
attached_image_error = MessageContainer(
    title=ERROR_HEADER,
    description="–°—Å—ã–ª–∫–∞ –±–∏—Ç–∞—è, –ª–∏–±–æ —ç—Ç–æ –Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ."
)
self_sending_error = MessageContainer(
    title=ERROR_HEADER,
    description="–ö–æ–Ω–µ—á–Ω–æ, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤—ã –º–æ–≥–ª–∏ –±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É —Å–∞–º–∏ —Å–µ–±–µ, –Ω–æ —ç—Ç–æ –≥—Ä—É—Å—Ç–Ω–æ, "
                "–ø–æ—ç—Ç–æ–º—É –¥–∞–≤–∞–π—Ç–µ –æ—Å—Ç–∞–≤–∏–º —ç—Ç—É –∑–∞—Ç–µ—é."
)
send_success = MessageContainer(
    title="–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!",
    description="–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ —Å–æ–∑–¥–∞–Ω–∞! –û–Ω–∞ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 14 —Ñ–µ–≤—Ä–∞–ª—è."
)
expired_event = MessageContainer(
    title="–ü–æ–µ–∑–¥ —É—à–µ–ª",
    description="–ò–≤–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω. –í—ã –±–æ–ª—å—à–µ –Ω–µ –º–æ–∂–µ—Ç–µ –≤—Ç–∞–π–Ω–µ –¥–µ–ª–∏—Ç—å—Å—è –∫–æ—à–∞—á—å–∏–º–∏ –Ω–µ–∂–Ω–æ—Å—Ç—è–º–∏. "
                "–í—Å–µ —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤–∞–º–∏ –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∏ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∞–¥—Ä–µ—Å–∞—Ç–∞–º."
)
max_count_error = MessageContainer(
    title=ERROR_HEADER,
    description="–í—ã —É–∂–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ 25 –≤–∞–ª–µ–Ω—Ç–∏–Ω–æ–∫ —Ä–∞–∑–Ω—ã–º –ª—é–¥—è–º. –≠—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–µ —á–∏—Å–ª–æ!"
)
empty_list_error = MessageContainer(
    title=ERROR_HEADER,
    description="–í—ã –µ—â–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∏."
)
not_exist_error = MessageContainer(
    title=ERROR_HEADER,
    description="–≠—Ç–æ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤–∞–ª–µ–Ω—Ç–∏–Ω–æ–∫, –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞"
)
deletion = MessageContainer(
    title="–ü–æ–¥ –Ω–æ–∂!",
    description="–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞ :("
)
